<p id="notice"><%= notice %></p>
<div>
  <div>
    <div>
      <p>
        <strong>Title:</strong>
        <%= @event.title %>
      </p>

      <%= link_to image_tag(@event.image.url(:med)), @event.image.url %>

      <p>
        <strong>Description:</strong>
        <%= @event.description %>
      </p>

      <p>
        <strong>Start Date:</strong>
        <%= @event.start_date %>
      </p>

      <p>
        <strong>End Date:</strong>
        <%= @event.end_date %>
      </p>

      <p>
        <strong>Location:</strong>
        <%= @event.location %>
      </p>

      <p id="latitude" type="hidden" value="<%= @event.latitude %>">
      </p>

      <p id="longitude" type ="hidden" value="<%= @event.longitude %>">
      </p>


      <p>
        <strong>Start Time:</strong>
        <%= @event.start_time.strftime("%I:%M %p") %>
      </p>

      <p>
        <strong>End Time:</strong>
        <%= @event.end_time.strftime("%I:%M %p") %>
      </p>

      <hr>
      <h1>People Attending This Event</h1>

      <table class="attendance_list">
        <thead>
          <tr>
            <th>Username</th>
          </tr>
        </thead>
        <tbody>
          <% @eventees.each do |eventee| %>
          <tr>
            <td><%= eventee.username%></td>
            <td><%= link_to 'Show', @user %></td>
          </tr>
          <% end %>

        </tbody>
      </table>
      <hr>
      <%  if Attendance.where(:user_id => current_user.id, :event_id => @event.id).blank? %>
      <%= link_to 'Attend', '/events/' + @event.id.to_s + '/attend', :method => :post %> |
      <% else %>
      <%= link_to 'Unattend', '/events/' + @event.id.to_s + '/unattend', :method => :delete %> |
      <% end %>

      <%= link_to 'Edit', edit_event_path(@event) %> |
      <%= link_to 'Back', events_path %>
    </div>

    <div>
      <div id="map"></div>
    </div>
    <script>
    function initMap() {
      var latitude = document.getElementById("latitude").getAttribute("value");
      var longitude = document.getElementById("longitude").getAttribute("value");
      var location = new google.maps.LatLng(latitude,longitude);
      var mapOptions = { zoom:13, center: location }
      var map = new google.maps.Map(document.getElementById("map"), mapOptions);

      var marker = new google.maps.Marker({
        position: location,
        animation: google.maps.Animation.BOUNCE,
        map: map,

      });
    }
    google.maps.event.addDomListener(window, "load", initMap);
    </script>
  </div>
</div>
